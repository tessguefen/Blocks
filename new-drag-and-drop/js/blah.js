var d = [{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":32,"layout_id":3,"name":"C","parent":31}],"children_count":1,"cmpnt_id":1,"code":"1_509","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":31,"layout_id":3,"name":"B","parent":28}],"children_count":1,"cmpnt_id":1,"code":1,"component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":28,"layout_id":3,"name":"A","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92_762","component":{"allow_children":0,"alw_chldrn":0,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":35,"layout_id":3,"name":"F","parent":34}],"children_count":1,"cmpnt_id":1,"code":"1_509_620","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":34,"layout_id":3,"name":"D","parent":33}],"children_count":1,"cmpnt_id":1,"code":"1_827","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":2,"dt_end":0,"dt_start":0,"id":33,"layout_id":3,"name":"E","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":32,"layout_id":3,"name":"C","parent":31}],"children_count":1,"cmpnt_id":1,"code":"1_509","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":31,"layout_id":3,"name":"B","parent":28}],"children_count":1,"cmpnt_id":1,"code":1,"component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":28,"layout_id":3,"name":"A","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92_762","component":{"allow_children":0,"alw_chldrn":0,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":35,"layout_id":3,"name":"F","parent":34}],"children_count":1,"cmpnt_id":1,"code":"1_509_620","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":34,"layout_id":3,"name":"D","parent":33}],"children_count":1,"cmpnt_id":1,"code":"1_827","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":2,"dt_end":0,"dt_start":0,"id":33,"layout_id":3,"name":"E","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":32,"layout_id":3,"name":"C","parent":31}],"children_count":1,"cmpnt_id":1,"code":"1_509","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":31,"layout_id":3,"name":"B","parent":28}],"children_count":1,"cmpnt_id":1,"code":1,"component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":28,"layout_id":3,"name":"A","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92_762","component":{"allow_children":0,"alw_chldrn":0,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":35,"layout_id":3,"name":"F","parent":34}],"children_count":1,"cmpnt_id":1,"code":"1_509_620","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":34,"layout_id":3,"name":"D","parent":33}],"children_count":1,"cmpnt_id":1,"code":"1_827","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":2,"dt_end":0,"dt_start":0,"id":33,"layout_id":3,"name":"E","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":32,"layout_id":3,"name":"C","parent":31}],"children_count":1,"cmpnt_id":1,"code":"1_509","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":31,"layout_id":3,"name":"B","parent":28}],"children_count":1,"cmpnt_id":1,"code":1,"component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":28,"layout_id":3,"name":"A","parent":0},{"active":1,"children":[{"active":1,"children":[{"active":1,"children":"","children_count":0,"cmpnt_id":1,"code":"1_509_92_762","component":{"allow_children":0,"alw_chldrn":0,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":35,"layout_id":3,"name":"F","parent":34}],"children_count":1,"cmpnt_id":1,"code":"1_509_620","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":1,"dt_end":0,"dt_start":0,"id":34,"layout_id":3,"name":"D","parent":33}],"children_count":1,"cmpnt_id":1,"code":"1_827","component":{"allow_children":1,"alw_chldrn":1,"attributes":[{"cmpnt_id":1,"code":"attribute_1","component_id":1,"disp_order":1,"id":1,"prompt":"Attribute 1","required":0,"type":"text","value":""},{"cmpnt_id":1,"code":"Prod_test","component_id":1,"disp_order":3,"id":3,"product":{"code":"test-product-1","id":1},"prompt":"Product Test","required":0,"type":"product","value":":code=test-product-1,:id=1"},{"category":{"code":"","id":0},"cmpnt_id":1,"code":"Cat_test","component_id":1,"disp_order":4,"id":4,"prompt":"Category Test","required":0,"type":"category","value":":id=0"},{"cmpnt_id":1,"code":"link_test","component_id":1,"disp_order":5,"id":5,"link":{"targ":"","type":"N","value":""},"prompt":"Link","required":0,"type":"link","value":":type=N"},{"cmpnt_id":1,"code":"img_typ","component_id":1,"disp_order":6,"id":6,"options":[{"code":"main","descrip":"Main","id":1}],"prompt":"Image Type Test","required":0,"type":"imagetype","value":""}],"code":"component_1","descrip":"","disp_order":1,"id":1,"image":"","name":"Component 1"},"component_id":1,"disp_order":2,"dt_end":0,"dt_start":0,"id":33,"layout_id":3,"name":"E","parent":0}];
function LayoutComponents( data )
{
	var self = this;

	self.container = document.getElementById( 'layoutcomponents' );
	self.component_container = document.getElementById( 'components' );
	self.data = data;
	self.newData = [];

	self.active_drag;

	self.Initialize();
}

LayoutComponents.prototype.Initialize = function()
{
	var self = this;

	if ( self.data.length > 0 ) 
	{
		for (var i = 0, dataLength = self.data.length; i < dataLength; i++) {
			self.Build( self.data[ i ] );
		}
	}

	self.Sortable( self.container );

	new Sortable( self.component_container, {
		group: {
			name: 'nested',
			pull: 'clone'
		},
		sort: false,
		animation: 150,
		onEnd: function( evt ){
			if ( evt.item.parentNode === self.component_container )
			{
				return;
			}
			
			evt.item.classList.add( 'layout-component' );
			// setTimeout(function() {
			// 	// if you click cancel
			// 	evt.item.remove();
			// }, 2000);
		}
	});
}

LayoutComponents.prototype.Build = function( layout_component )
{
	var self = this;
	var children_elem;
	var elem = document.createElement( 'div' );

	elem.layout_component = layout_component;

	elem.classList.add( 'layout-component', 'list-group-item' );
	elem.innerHTML = '<span class="handle"></span>' + elem.layout_component.name;


	if ( layout_component.parent_element )
	{
		layout_component.parent_element.appendChild( elem );
	}
	else
	{
		self.container.appendChild( elem );
	}

	if ( layout_component.component.alw_chldrn === 1 )
	{
		children_elem = document.createElement( 'div' );
		children_elem.classList.add( 'nested-sortable', 'list-group' );
		elem.appendChild( children_elem );

		self.Sortable( children_elem );
	}


	if ( layout_component.children_count > 0 )
	{
		for (var i = 0; i < layout_component.children_count; i++)
		{
			layout_component.children[ i ].parent_element = children_elem;
			self.Build( layout_component.children[ i ] );
		}
	}
}

LayoutComponents.prototype.Sortable = function( elem )
{
	var self = this;

	new Sortable( elem, {
		group: 'nested',
		animation: 150,
		fallbackOnBody: true,
		swapThreshold: 0.65,
		handle: '.handle',
		draggable: '.layout-component',
		scroll: self.container
	});
}

new LayoutComponents( d );
