<style>
.angular-ui-tree-dropzone,
.angular-ui-tree-empty{
	border:2px dashed #b4b4b4;
	min-height:100px;
	background-color:#e5e5e5;
	background-image:-webkit-linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff),-webkit-linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff);
	background-image:linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff),linear-gradient(45deg,#fff 25%,transparent 0,transparent 75%,#fff 0,#fff);
	background-size:60px 60px;
	background-position:0 0,30px 30px
}
.angular-ui-tree-empty{
	pointer-events:none
}
.angular-ui-tree-nodes{
	position:relative;
	margin:0;
	padding:0;
	list-style:none
}
.angular-ui-tree-nodes .angular-ui-tree-nodes{
	padding-left:20px;
	padding-right:20px
}
.angular-ui-tree-node,.angular-ui-tree-placeholder{
	position:relative;
	margin:0;
	padding:0;
	min-height:20px;
	line-height:20px
}
.angular-ui-tree-hidden{
	display:none
}
.angular-ui-tree-placeholder{
	margin:10px;
	padding:0;
	min-height:30px
}
.angular-ui-tree-handle{
	cursor:move;
	text-decoration:none;
	box-sizing:border-box;
	min-height:20px;
	line-height:20px
}
.angular-ui-tree-drag{
	position:absolute;
	pointer-events:none;
	z-index:999;
	opacity:.8
}
.angular-ui-tree-drag .tree-node-content{
	margin-top:0
}
tr.angular-ui-tree-empty{
	height:100px
}
.tree-node{
	border:1px solid #dae2ea;
	background:#f8faff;
	color:#7c9eb2
}
.nodrop{
	background-color:#f2dede
}
.tree-node-content{
	margin:10px
}
.tree-handle{
	padding:10px;
	background:#428bca;
	color:#FFF;
	margin-right:10px
}
.angular-ui-tree-placeholder{
	background:#e5e5e5;
	border:2px dashed #d5d5d5;
	-webkit-box-sizing:border-box;
	-moz-box-sizing:border-box;
	box-sizing:border-box
}
</style>
<style>
	#mm9_content {
		background: #f4f5f5;
	}
	.cmp-components {
		position: relative;
		display: block;
		margin: 15px auto;
		width: 100%;
		max-width: 900px;
		box-sizing: border-box;
	}
	.cmp-component {
		position: relative;
		display: block;
	}
	.cmp-component--wrapper {
		position: relative;
		display: block;
		margin: 15px auto;
		width: 100%;
		max-width: 900px;
		box-sizing: border-box;
		background-color: #fff;
		border-radius: 3px;
		box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.05);
	}
	.cmp-component--drag {
		position: relative;
		display: inline-block;
		vertical-align: middle;
		margin: 10px 26px 10px 0;
		width: 70px;
		height: 40px;
		padding: 18px 24px;
		border-right: 1px solid #e0e0e0;
		box-sizing: border-box;
		background: transparent;
		line-height: 1;
		text-align: center;
		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
		cursor: pointer;
	}
	.cmp-component--drag__line1,
	.cmp-component--drag__line2 {
		position: absolute;
		top: 16px;
		left: 27px;
		width: 15px;
		height: 2px;
		background-color: #b4b4b4;
		transition: 0.25s all linear;
	}
	.cmp-component--drag__line2 {
		top: 22px;
	}
	.cmp-component--title {
		position: relative;
		display: inline-block;
		vertical-align: middle;
		padding: 18px 0px;
		width: calc(100% - 96px - 70px - 91px);
		font-size: 20px;
		font-family: 'MuseoSans';
	}
	.cmp-component--title__component {
		display: block;
		opacity: .65;
		font-size: 12px;
		letter-spacing: 0.015em;
		margin-bottom: 0.25rem;
	}
	.cmp-component--expand {
		position: relative;
		display: inline-block;
		vertical-align: middle;
		margin: 10px;
		width: 50px;
		height: 40px;
		border-radius: 50%;
		box-sizing: border-box;
		transition: 0.2s all linear;
		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
		cursor: pointer;
	}
	.cmp-component--expand__line1 {
		position: absolute;
		top: 20px;
		left: 17px;
		width: 10px;
		height: 2px;
		background-color: #b4b4b4;
		transition: 0.25s all linear;
		transform: rotate(45deg);
	}
	.cmp-component--expand__line2 {
		position: absolute;
		top: 20px;
		left: 23px;
		width: 10px;
		height: 2px;
		background-color: #b4b4b4;
		transition: 0.25s all linear;
		transform: rotate(-45deg);
	}
	.cmp-component--expand__toggled .cmp-component--expand__line1 {
		transform: rotate(-45deg);
	}
	.cmp-component--expand__toggled .cmp-component--expand__line2 {
		transform: rotate(45deg);
	}
	.cmp-component--actions__row {
		position: relative;
		display: inline-block;
	}
	.cmp-component--actions__button {
		position: relative;
		display: inline-block;
		vertical-align: middle;
		margin: 10px 0 10px 10px;
		padding: 18px 24px;
		width: 70px;
		height: 40px;
		line-height: 1;
		background: transparent;
		border-left: 1px solid #e0e0e0;
		cursor: pointer;
		outline: none;
		text-align: center;
		white-space: normal;
		box-sizing: border-box;
		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
	.cmp-component--actions__button_custom {
		position: absolute;
		top: 0;
		left: 0;
	}
	.cmp-component--actions__button_el1,
	.cmp-component--actions__button_el2,
	.cmp-component--actions__button_el3{
		position: absolute;
		top: 18px;
		left: 26px;
		width: 4px;
		height: 4px;
		border-radius: 50%;
		background-color: #b4b4b4;
		transition: 0.1s all linear;
	}
	.cmp-component--actions__button_el2 {
		left: 33px;
	}
	.cmp-component--actions__button_el3 {
		left: 40px;
	}
	.cmp-component--actions__tail_border {
		position: absolute;
		display: none;
		width: 0;
		height: 0;
		border-style: solid;
		z-index: 3;
		bottom: -5px;
		border-color: #ddd transparent;
		border-width: 0 12px 12px;
		right: calc(50% - 12px);
		left: auto;
	}
	.cmp-component--actions__tail {
		position: absolute;
		display: none;
		width: 0;
		height: 0;
		border-style: solid;
		z-index: 3;
		bottom: -6px;
		border-color: #fff transparent;
		border-width: 0 12px 12px;
		right: calc(50% - 12px);
		left: auto;
	}

	.cmp-component--actions__menu {
		font-size: 12px;
		z-index: 1;
		position: absolute;
		top: 54px;
		right: 10px;
		left: auto;
		padding: 8px 0;
		width: 170px;
		display: none;
		background: #fff;
		border: 1px solid #ddd;
		border-radius: 5px;
		box-sizing: border-box;
		box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
	}
	.cmp-component--actions__active .cmp-component--actions__menu,
	.cmp-component--actions__active .cmp-component--actions__tail_border,
	.cmp-component--actions__active .cmp-component--actions__tail {
		display: block;
	}
	.cmp-component--actions__active .cmp-component--actions__button_el1,
	.cmp-component--actions__active .cmp-component--actions__button_el2,
	.cmp-component--actions__active .cmp-component--actions__button_el3{
		background: #1eabbd;
	}
	.cmp-component--actions__item {
		position: relative;
		display: block;
		padding: 8px 20px 8px 20px;
		white-space: nowrap;
		cursor: pointer;
		color: #000;
		text-align: left;
		font-weight: normal;
		font-size: 12px;
		font-family: 'MuseoSans';
	}
	.cmp-component--actions__item:hover {
		background-color: #f0f0f0;
	}
	.cmp-component--actions__divider {
		position: relative;
		display: block;
		margin: 8px 0;
		background-color: #eee;
		height: 1px;
		border: none;
	}

	.cmp--nodes__hidden ol {
		display: none;
	}

</style>

<div ui-tree class="cmp-components">
	<ol ui-tree-nodes="" ng-model="data.layout.nodes" id="tree-root">
		<li class="cmp-component" ng-attr-data-nodrop-enabled="{{ node.component.allow_children ? undefined : true  }}" ng-repeat="node in data.layout.nodes" ng-class="{ 'cmp_container_wrap' : node.component.allow_children, 'cmp_item_wrap' : !node.component.allow_children, 'cmp--nodes__hidden': node.hide_nodes }" ui-tree-node ng-include="'nodes_renderer.html'" ng-init="parent = data.layout" ></li>
	</ol>
</div>

<!-- Nested node template -->
<script type="text/ng-template" id="nodes_renderer.html">
	<div ui-tree-handle class="cmp-component--wrapper" ng-class="{ 'cmp_container' : node.component.allow_children, 'cmp_item' : !node.component.allow_children }" ng-init="checkNodes( node )">

		<span class="cmp-component--drag">
			<span class="cmp-component--drag__line1"></span>
			<span class="cmp-component--drag__line2"></span>
		</span>

		<span class="cmp-component--title" ng-class="{ 'cmp-component--title__inactive' : !node.active }">
			<span class="cmp-component--title__component">{{node.component.name}}</span>
			<span class="cmp-component--title__name">{{node.name}}</span>
		</span>

		<span class="cmp-component--expand" ng-if="node.nodes.length" ng-click="slideToggle( node )" data-nodrag>
			<span class="cmp-component--expand__icon" ng-attr-title="{{ node.hide_nodes ? 'Show Children' : 'Hide Children' }}" ng-class="{ 'cmp-component--expand__toggled' : node.hide_nodes }">
				<span class="cmp-component--expand__line1"></span>
				<span class="cmp-component--expand__line2"></span>
			</span>
		</span>
		<span class="cmp-component--expand" ng-if="!node.nodes.length" data-nodrag></span>

		<span class="cmp-component--actions" data-nodrag ng-class="{ 'cmp-component--actions__active' : node.actions_active }" ng-click="node.actions_active = !node.actions_active">
			<span class="cmp-component--actions__row">
				<div class="cmp-component--actions__menu">
					<span class="cmp-component--actions__item" ng-if="data.can_add && data.can_edit && node.component.allow_children" ng-click="newComponent( this )">Add Child</span>
					<span class="cmp-component--actions__item" ng-if="data.can_edit" ng-click="editComponent( this, node )">Edit Component</span>
					<span class="cmp-component--actions__item" ng-if="data.can_add && data.can_edit" ng-click="duplicateComponent( parent, node )">Duplicate Component</span>
					<span class="cmp-component--actions__divider" ng-if="data.can_delete"></span>
					<span class="cmp-component--actions__item" ng-if="data.can_delete" ng-click="removeComponent( this, node )">Delete Component</span>
				</div>
				<span class="cmp-component--actions__button" tabindex="0" title="More Options">
					<span class="cmp-component--actions__button_custom">
						<span class="cmp-component--actions__button_el1"></span>
						<span class="cmp-component--actions__button_el2"></span>
						<span class="cmp-component--actions__button_el3"></span>
					</span>
					<span class="cmp-component--actions__tail_border"></span>
					<span class="cmp-component--actions__tail"></span>
				</span>
			</span>
		</span>
	</div>
	<ol ng-attr-data-nodrop-enabled="{{ node.component.allow_children ? undefined : true  }}" ui-tree-nodes="" ng-init="parent = node" ng-model="node.nodes">
		<li class="cmp-component" ng-repeat="node in node.nodes" ui-tree-node ng-include="'nodes_renderer.html'" ng-class="{ 'cmp_container_wrap' : node.component.allow_children, 'cmp_item_wrap' : !node.component.allow_children, 'cmp--nodes__hidden': node.hide_nodes }">
		</li>
	</ol>
</script>